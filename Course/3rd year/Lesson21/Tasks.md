Часть A:

Создайте две таблицы:
users с колонками id (INTEGER, PRIMARY KEY), name (TEXT), age (INTEGER).

orders с колонками id (INTEGER, PRIMARY KEY), user_id (INTEGER), amount (INTEGER).

Напишите транзакцию, которая:
Добавляет пользователя с именем "Alice" и возрастом 25.
Добавляет для неё заказ на сумму 150.
Фиксирует изменения.

Часть B:

Модифицируйте задание из части A.
Если пользователь с именем "Alice" уже существует в таблице users, транзакция должна откатываться (используйте ROLLBACK).

Добавьте проверку: если сумма заказа больше 1000, транзакция должна откатиться.
В противном случае добавьте заказ.
В конце зафиксируйте изменения.

Часть C:
Создайте две таблицы:

users с колонками id (INTEGER, PRIMARY KEY), name (TEXT), age (INTEGER).
orders с колонками id (INTEGER, PRIMARY KEY), user_id (INTEGER), amount (INTEGER), order_date (DATE).
Напишите транзакцию, которая:

Добавляет пользователя с именем "Alice" и возрастом 25.
Добавляет заказ для пользователя на сумму 150 с текущей датой.
Фиксирует изменения.

Модифицируйте задание:

Если пользователь с именем "Alice" уже существует в таблице users, транзакция должна откатываться (используйте ROLLBACK).
Если сумма всех заказов в таблице orders для этого пользователя превышает 5000, транзакция должна откатываться.
Если сумма текущего заказа превышает 1000, транзакция также должна откатываться.
Если дата заказа старше одного года от текущей даты, транзакция должна откатываться.
Используйте агрегатную функцию (SUM) для проверки общей суммы заказов пользователя.
В конце успешной транзакции зафиксируйте изменения.